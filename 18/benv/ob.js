require("./env")
require("./loader")

function _0x1983(_0x1de941, _0x2f274e) {
    const _0x7b18c6 = _0x5959();
    return _0x1983 = function (_0x103b7c, _0x3767e2) {
        _0x103b7c = _0x103b7c - 0x1e1;
        let _0x5dacff = _0x7b18c6[_0x103b7c];
        return _0x5dacff;
    }
        ,
        _0x1983(_0x1de941, _0x2f274e);
}

(function (_0xfb990e, _0x58f059) {
    const _0x4bc778 = _0x1983
        , _0x5e70a5 = _0xfb990e();
    while (!![]) {
        try {
            const _0x558e1e = -parseInt(_0x4bc778(0x1fd)) / 0x1 + parseInt(_0x4bc778(0x203)) / 0x2 + parseInt(_0x4bc778(0x206)) / 0x3 * (parseInt(_0x4bc778(0x1e1)) / 0x4) + -parseInt(_0x4bc778(0x1ed)) / 0x5 * (-parseInt(_0x4bc778(0x205)) / 0x6) + -parseInt(_0x4bc778(0x200)) / 0x7 + -parseInt(_0x4bc778(0x1ef)) / 0x8 + -parseInt(_0x4bc778(0x1f0)) / 0x9;
            if (_0x558e1e === _0x58f059)
                break;
            else
                _0x5e70a5['push'](_0x5e70a5['shift']());
        } catch (_0x454bb2) {
            _0x5e70a5['push'](_0x5e70a5['shift']());
        }
    }
}(_0x5959, 0x91840));

const _0x5408bf = (function () {
    let _0x5a6697 = !![];
    return function (_0x4020fb, _0x9db4e7) {
        const _0x5ad05b = _0x5a6697 ? function () {
                    const _0x49e327 = _0x1983;
                    if (_0x9db4e7) {
                        const _0x5c6dd8 = _0x9db4e7[_0x49e327(0x1ee)](_0x4020fb, arguments);
                        return _0x9db4e7 = null,
                            _0x5c6dd8;
                    }
                }
                : function () {
                }
        ;
        return _0x5a6697 = ![],
            _0x5ad05b;
    }
        ;
}())
    , _0x3f4f5e = _0x5408bf(this, function () {
    const _0x5b3de1 = _0x1983;
    return _0x3f4f5e[_0x5b3de1(0x1f6)]()[_0x5b3de1(0x1f9)]('(((.+)+)+)+$')[_0x5b3de1(0x1f6)]()[_0x5b3de1(0x1fb)](_0x3f4f5e)[_0x5b3de1(0x1f9)](_0x5b3de1(0x1e7));
});
// _0x3f4f5e();
const _0x3767e2 = (function () {
    let _0x25c379 = !![];
    return function (_0xfaeb92, _0x107892) {
        const _0x3842a8 = _0x25c379 ? function () {
                    const _0x17e84c = _0x1983;
                    if (_0x107892) {
                        const _0x4d8237 = _0x107892[_0x17e84c(0x1ee)](_0xfaeb92, arguments);
                        return _0x107892 = null,
                            _0x4d8237;
                    }
                }
                : function () {
                }
        ;
        return _0x25c379 = ![],
            _0x3842a8;
    }
        ;
}())
    , _0x103b7c = _0x3767e2(this, function () {
    const _0x9fd465 = _0x1983
        , _0x1e3f1d = function () {
        const _0x3d8502 = _0x1983;
        let _0x4509d3;
        try {
            _0x4509d3 = Function(_0x3d8502(0x1e5) + _0x3d8502(0x202) + ');')();
        } catch (_0xa9f013) {
            _0x4509d3 = window;
        }
        return _0x4509d3;
    }
        , _0x573a24 = _0x1e3f1d()
        , _0x2e51e5 = _0x573a24[_0x9fd465(0x1fe)] = _0x573a24[_0x9fd465(0x1fe)] || {}
        , _0x2a39da = ['log', _0x9fd465(0x1ec), 'info', 'error', _0x9fd465(0x1f3), _0x9fd465(0x1f5), _0x9fd465(0x1f1)];
    for (let _0x10c5bc = 0x0; _0x10c5bc < _0x2a39da[_0x9fd465(0x20b)]; _0x10c5bc++) {
        const _0x1211c3 = _0x3767e2['constructor'][_0x9fd465(0x1eb)][_0x9fd465(0x1e2)](_0x3767e2)
            , _0x124058 = _0x2a39da[_0x10c5bc]
            , _0x1c4c94 = _0x2e51e5[_0x124058] || _0x1211c3;
        _0x1211c3[_0x9fd465(0x1fc)] = _0x3767e2[_0x9fd465(0x1e2)](_0x3767e2),
            _0x1211c3[_0x9fd465(0x1f6)] = _0x1c4c94[_0x9fd465(0x1f6)]['bind'](_0x1c4c94),
            _0x2e51e5[_0x124058] = _0x1211c3;
    }
});
// _0x103b7c();

const VM_OPS = {
    0x1: function (_0x36a893) {
        const _0xe99518 = _0x1983;
        return new Date()[_0xe99518(0x1e8)]();
    },
    0x2: function (_0x4deae8) {
        return getCrawlerInfo(_0x4deae8['ts']);
    },
    0x3: function (_0x1c307f) {
        const _0x1ec3f3 = _0x1983;
        return btoa(_0x1c307f[_0x1ec3f3(0x20a)]);
    },
    0x4: function (_0xafc5c1) {
        const _0x21e569 = _0x1983;
        return new URLSearchParams(_0xafc5c1[_0x21e569(0x208)])['toString']();
    },
    0x5: function (_0x4d7705) {
        const _0x12adfa = _0x1983;
        return console['error']['apply'](null, _0x4d7705[_0x12adfa(0x1ff)]);
    }
};

function _0x5959() {
    const _0x156059 = ['params', 'headers', 'input', 'length', '16AEfXGp', 'bind', '/api/problem-detail/', 'json', 'return\x20(function()\x20', 'ajax', '(((.+)+)+)+$', 'getTime', '/data/?', 'messagePack', 'prototype', 'warn', '5171800VRDLYQ', 'apply', '1803200grDZTF', '33183udGVeL', 'trace', 'config', 'exception', 'client-version', 'table', 'toString', 'Error\x20fetching\x20problem\x20details:', 'luoge', 'search', '获取请求参数失败:', 'constructor', '__proto__', '824158cpXewj', 'console', 'args', '3969147byHlBn', 'query', '{}.constructor(\x22return\x20this\x22)(\x20)', '545084lgEUij', '1.0.0', '6jJeLFt', '682047XdVZwu', 'timestamp'];
    _0x5959 = function () {
        return _0x156059;
    }
    ;
    return _0x5959();
}

function vmExecute(_0x4d87c8, _0x32370b) {
    const _0x1bedc8 = _0x1983;
    return VM_OPS[_0x4d87c8][_0x1bedc8(0x1ee)](null, [_0x32370b]);
}

const obj = {
    "url": "https://www.mashangpa.com/api/problem-detail/18/data/?page=3",
    "type": "GET",
    "isLocal": false,
    "global": true,
    "processData": true,
    "async": true,
    "contentType": "application/x-www-form-urlencoded; charset=UTF-8",
    "accepts": {
        "*": "*/*",
        "text": "text/plain",
        "html": "text/html",
        "xml": "application/xml, text/xml",
        "json": "application/json, text/javascript",
        "script": "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
    },
    "contents": {
        "xml": {},
        "html": {},
        "json": {},
        "script": {}
    },
    "responseFields": {
        "xml": "responseXML",
        "text": "responseText",
        "json": "responseJSON"
    },
    "converters": {
        "text html": true
    },
    "flatOptions": {
        "url": true,
        "context": true
    },
    "jsonp": "callback",
    "method": "GET",
    "dataType": "json",
    "dataTypes": [
        "json"
    ],
    "crossDomain": false
}

var B = function (_0x3f0d72) {
    const _0x8b3db1 = _0x1983;
    return anti(0x4)({
        'serverTime': _0x3f0d72
    })[_0x8b3db1(0x1ea)]();
};

function getCrawlerInfo(_0x2926eb) {
    return B(_0x2926eb);
}

function generateToken(_0x5e86b1) {
    const _0x1f4414 = _0x1983;
    let _0x44e2c2 = 0x0
        , _0x2ef45b = {
        'headers': _0x5e86b1['headers'] || {},
        'ts': 0x0,
        'crawler': ''
    };
    const _0xd39935 = [() => {
        _0x2ef45b['ts'] = vmExecute(0x1, _0x2ef45b),
            _0x44e2c2 = 0x1;
    }
        , () => {
            _0x2ef45b['crawler'] = vmExecute(0x2, _0x2ef45b),
                _0x44e2c2 = 0x2;
        }
        , () => {
            const _0x38ae12 = _0x1983;
            _0x2ef45b[_0x38ae12(0x209)]['m'] = _0x2ef45b['crawler'] + vmExecute(0x3, {
                'input': _0x38ae12(0x1f8) + _0x2ef45b['ts']
            }),
                _0x2ef45b[_0x38ae12(0x209)][_0x38ae12(0x207)] = _0x2ef45b['ts'],
                _0x2ef45b[_0x38ae12(0x209)][_0x38ae12(0x1f4)] = _0x38ae12(0x204),
                _0x5e86b1[_0x38ae12(0x209)] = _0x2ef45b[_0x38ae12(0x209)],
                _0x44e2c2 = 0x3;
        }
    ];
    try {
        while (_0x44e2c2 < _0xd39935[_0x1f4414(0x20b)]) {
            _0xd39935[_0x44e2c2]();
        }
        return _0x5e86b1 = _0x2ef45b
    } catch (_0x36b474) {
        console.log(_0x36b474)
        vmExecute(0x5, {
            'args': [_0x1f4414(0x1fa), _0x36b474]
        });
    }
}

async function loadPage(page) {
    let payload = {
        'params': {
            'page': page
        },
        'query': '',
        'config': {}
    }
    payload.query = `page=${page}`;
    const time = new Date().getTime();
    const token = generateToken({})
    const m = token.headers.m
    const ts = token.headers.timestamp
    const res = await fetch(`https://www.mashangpa.com/api/problem-detail/18/data/?page=${page}`, {
        headers: {
            'accept': 'application/json, text/javascript, */*; q=0.01',
            'accept-language': 'en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7',
            'cache-control': 'no-cache',
            'client-version': '1.0.0',
            'm': m,
            'pragma': 'no-cache',
            'priority': 'u=1, i',
            'referer': 'https://www.mashangpa.com/problem-detail/18/',
            'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"',
            'sec-ch-ua-mobile': '?0',
            'sec-ch-ua-platform': '"Windows"',
            'sec-fetch-dest': 'empty',
            'sec-fetch-mode': 'cors',
            'sec-fetch-site': 'same-origin',
            'timestamp': ts,
            'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36',
            'x-requested-with': 'XMLHttpRequest',
            'cookie': 'sessionid=d5iowmvnczn5zyj8tjshnyru94hhgtgn; Hm_lvt_b5d072258d61ab3cd6a9d485aac7f183=1745904826,1745936534,1745979788; HMACCOUNT=05D2AEE5364F4A63; v=QTY3czl0dDdTb2c4UXI1dkQxZFNJUkpEX3c5MXIxel9oR29tamRoM0c2aHY2MEF4UURfQ3VWUURkcW1yMTc0NjAxMjA4MDA4NQ==; s=51b351b351b351b370b0d0905010f07030717130b0; Hm_lpvt_b5d072258d61ab3cd6a9d485aac7f183=1746025205; _nano_fp=XpmYn59xnpPonpXYlT_8x99QHKo0GFFXnJIualXc'
        }
    });
    return await res.json()
}

var s = 0
!(async function () {
    for (let i = 1; i < 21; i++) {
        const data = await loadPage(i);
        data.current_array.forEach(e => {
            s += e
        })
    }
    console.log(s)
})()

